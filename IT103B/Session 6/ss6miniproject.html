<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        let libraries = ["Toán", "Văn", "Anh"];
        let loginSuccess = false;

        for (let i = 1; i <= 3; i++) {
            let user = prompt("Nhập tài khoản:");
            let pass = prompt("Nhập mật khẩu:");

            if (user === "admin" && pass === "12345") {
                console.log("Đăng nhập thành công!");
                loginSuccess = true;
                break;
            } else {
                console.log(`Sai thông tin! Lần ${i}/3`);
            }
        }

        if (!loginSuccess) {
            console.log("Tài khoản đã bị khóa");
        } else {
            let choice;
            do {
                let menu = `=== Hệ thống Quản trị Thư viện Nâng cao ===
                    1. Nhập thêm lô sách mới.
                    2. Hiển thị danh sách sách.
                    3. Tìm kiếm sách.
                    4. Cập nhật tên sách.
                    5. Đảo ngược thứ tự kệ sách.
                    6. Nhập kho từ nguồn khác.
                    0. Thoát chương trình.`;

                choice = +prompt(menu);
                switch (choice) {
                    case 1:
                        let booksInput = prompt("Nhập tên sách (phân cách bằng dấu phẩy):");
                        if (booksInput) {
                            let bookList = booksInput.split(",");
                            let validBooks = 0;
                            for (let i = 0; i < bookList.length; i++) {
                                let bookName = bookList[i].trim();
                                if (bookName !== "") {
                                    libraries.push(bookName);
                                    validBooks++;
                                }
                            }
                            console.log(`Đã thêm ${validBooks} cuốn sách vào kho.`);
                        }
                        break;
                    case 2:
                        console.log("Danh sách sách:");
                        for (let i = 1; i <= libraries.length; i++) {
                            console.log(`${ i }.${ libraries[i - 1]}`);
                        }
                        break;
                    case 3:
                        let searchName = prompt("Nhập tên sách cần tìm:");
                        let found = false;
                        let index = -1;
                        for (let i = 0; i < libraries.length; i++) {
                            if (libraries[i] === searchName) {
                                found = true;
                                index = i;
                                break;
                            }
                        }
                        if (found) {
                            console.log(`Sách ${searchName} được tìm thấy tại vị trí ${index + 1}`);
                        } else {
                            console.log("Không tìm thấy");
                        }
                        break;
                    case 4:
                        let oldName = prompt("Nhập tên sách cần sửa:");
                        let foundUpdate = false;
                        for (let i = 0; i < libraries.length; i++) {
                            if (libraries[i] === oldName) {
                                let newName = prompt("Nhập tên sách mới:");
                                if (newName && newName.trim() !== "") {
                                    libraries[i] = newName;
                                    console.log(`Đã cập nhật tên sách thành công: ${oldName} -> ${newName}`);
                                    foundUpdate = true;
                                }
                                break;
                            }
                        }
                        if (!foundUpdate && oldName) {
                            console.log(`Không tìm thấy sách "${oldName}" để cập nhật.`);
                        }
                        break;
                    case 5:
                        libraries.reverse();
                        console.log("Danh sách sách đã được đảo ngược:");
                        for (let i = 0; i < libraries.length; i++) {
                            console.log(`${i + 1}. ${libraries[i]}`);
                        }
                        break;
                    case 6:
                        let branchBooks = ["Sách Kỹ Năng", "Truyện Tranh"];
                        for (let i = 0; i < branchBooks.length; i++) {
                            libraries.push(branchBooks[i]);
                        }
                        console.log("Đã gộp kho sách thành công");
                        break;
                    case 0:
                        console.log("Hẹn gặp lại!");
                        break;
                    default:
                        console.log("Lựa chọn không hợp lệ, vui lòng thử lại.");
                }
            } while (choice !== 0);
        }
    </script>
</body>

</html>