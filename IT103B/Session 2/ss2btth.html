<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        let name = prompt('Nhập tên người dùng:');
        let roleInput = prompt('Nhập vai trò (admin, student, guest):');
        let balanceInput = prompt('Nhập số dư tài khoản thẻ (ví dụ 50000, hoặc để trống):');
        let cardStatusInput = prompt('Trạng thái thẻ (nhập true nếu hoạt động, để trống hoặc khác để khóa):');
        let overdueInput = prompt('Số ngày quá hạn trả sách (0 nếu đúng hạn):');

        let role = roleInput ? roleInput.toLowerCase().trim() : '';
        let balance = balanceInput ? Number(balanceInput) : 0;
        let cardActive = String(cardStatusInput).toLowerCase().trim() === 'true';
        let overdueDays = overdueInput ? parseInt(overdueInput, 10) : 0;

        let roleMessage = '';
        switch (role) {
            case 'admin':
                roleMessage = 'Chào Admin, bạn có toàn quyền hệ thống';
                break;
            case 'student':
                roleMessage = 'Chào sinh viên, bạn có thể mượn sách';
                break;
            case 'guest':
                roleMessage = 'Chào khách, bạn chỉ có thể đọc tại chỗ';
                break;
            default:
                roleMessage = 'Lỗi: Vai trò không hợp lệ!';
        }

        let reasons = [];
        let hasName = Boolean(name && name.trim());
        if (!hasName) 
            reasons.push('Tên người dùng trống');
        if (!(role === 'student' || role === 'admin')) 
            reasons.push('Vai trò không đủ quyền');
        if (!(balance > 0)) 
            reasons.push('Số dư không đủ');
        if (!cardActive) 
            reasons.push('Thẻ không hoạt động');

        let borrowAllowed = hasName && (role === 'student' || role === 'admin') && (balance > 0) && cardActive;
        let borrowResult = borrowAllowed ? 'ĐƯỢC PHÉP MƯỢN SÁCH' : 'YÊU CẦU BỊ TỪ CHỐI';

        let penalty = 0;
        let returnStatus = '';
        let lockNotice = '';
        if (isNaN(overdueDays) || overdueDays <= 0) {
            penalty = 0;
            returnStatus = 'Đúng hạn';
        } else if (overdueDays >= 1 && overdueDays <= 5) {
            penalty = overdueDays * 5000;
            returnStatus = `Quá hạn ${overdueDays} ngày`;
        } else if (overdueDays >= 6 && overdueDays <= 10) {
            penalty = overdueDays * 10000;
            returnStatus = `Quá hạn ${overdueDays} ngày`;
        } else if (overdueDays > 10) {
            penalty = 200000;
            returnStatus = `Quá hạn ${overdueDays} ngày`;
            lockNotice = 'TÀI KHOẢN BỊ KHÓA';
        }

        let reasonText = reasons.length > 0 ? reasons.join('; ') : '';

        let output = `\t--- HỆ THỐNG MƯỢN TRẢ ---\n\n
            Người dùng: ${name ? name.toUpperCase() : ''}\n\n
            Quyền hạn: ${roleMessage}\n\n
            Kết quả mượn: ${borrowResult}${reasonText ? ' — ' + reasonText : ''}\n\n
            Tình trạng trả sách: ${returnStatus}\n\n
            Tiền phạt: ${penalty.toLocaleString('vi-VN')} 
            VNĐ${lockNotice ? '\n\n' + lockNotice : ''}`;

        console.log(output);
    </script>
</body>
</html>